* ALWAYS

  + Script and source files are never written to by fix (only target, temp and
    metadata files are written to).

* FAILURE

  + Exit status: >0
  + Failing target will not be modified (but a tempfile will be created).
  + Failing target's metadata will not be modified.
  + Nota Bene: Successful dependencies will be built even on error.

* SUCCESS

  + Exit status: 0


* Exit status

  0  = Success.
  1  = Won't overwrite target (anything fixable by --force).
  5  = Build failed (build script returned non-zero exit value).
  6  = Failed to write target (even though build succeeded). E.g. target dir
       could not be created, old target (or the target directory) was write
       protected or similar.
  7  = Failed to write metadata.
  10 = Couldn't read buildscript or source (permission denied, or file
       missing, or missing buildscript or source directories).
  15 = Bad options provided.

------------------------------------------------------------------------------

if (not exists script) {
    FAILURE
}

run script (producing tempfile)
if (script failed) {
    FAILURE: script exited non-zero
}

if (targetfile does not exists) {
    copy tempfile to target
    SUCCESS
} elsif (targetfile == tempfile) {
    delete tempfile
    SUCCESS
} elsif (
    targetfile metadata exist and
    targetfile == targetfile metadata
) {
    copy tempfile to target
    SUCCESS
} elsif ('--force') {
    copy tempfile to target
    SUCCESS
} else {
    FAILURE: target externally modified
}

write metadata
